<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Practical Guide To Virtual Networking on Linux | Gauthier Jolly</title><meta name=keywords content="Linux,Networking"><meta name=description content="How to create and manage virtual networks on you Linux host."><meta name=author content="Gauthier Jolly"><link rel=canonical href=https://gjolly.fr/blog/virtual-networking/><link crossorigin=anonymous href=https://gjolly.fr/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://gjolly.fr/img/terminal-sign.svg><link rel=icon type=image/png sizes=16x16 href=https://gjolly.fr/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gjolly.fr/favicon-32x32.png><link rel=apple-touch-icon href=https://gjolly.fr/apple-touch-icon.png><link rel=mask-icon href=https://gjolly.fr/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://gjolly.fr/blog/virtual-networking/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y4G50Q2695"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y4G50Q2695")}</script><meta property="og:url" content="https://gjolly.fr/blog/virtual-networking/"><meta property="og:site_name" content="Gauthier Jolly"><meta property="og:title" content="Practical Guide To Virtual Networking on Linux"><meta property="og:description" content="How to create and manage virtual networks on you Linux host."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-04-23T09:10:00+00:00"><meta property="article:modified_time" content="2025-04-23T09:10:00+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Networking"><meta name=twitter:card content="summary"><meta name=twitter:title content="Practical Guide To Virtual Networking on Linux"><meta name=twitter:description content="How to create and manage virtual networks on you Linux host."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://gjolly.fr/blog/"},{"@type":"ListItem","position":2,"name":"Practical Guide To Virtual Networking on Linux","item":"https://gjolly.fr/blog/virtual-networking/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Practical Guide To Virtual Networking on Linux","name":"Practical Guide To Virtual Networking on Linux","description":"How to create and manage virtual networks on you Linux host.","keywords":["Linux","Networking"],"articleBody":"Linux Networking: Bridged and Routed VM Networking Scenario 1: Bridged Networking (Layer 2 Integration) Goal: VMs/containers appear as full LAN peers, get IPs from the LAN’s DHCP, and are reachable directly.\nCreate a bridge interface (br0). Add the physical interface (e.g., eth0) to the bridge. Assign IP or DHCP to br0 only. eth0 should have no IP. Virtual interfaces (e.g., tap0) are also added to br0. Key Commands: 1 2 3 4 sudo ip link add br0 type bridge sudo ip link set eth0 master br0 sudo ip link set br0 up sudo dhcpcd br0 No NAT, no subnetting. Full LAN access.\nScenario 2: Routed Subnet for VMs (Layer 3 Isolation) Goal: Create a dedicated VM network (10.0.0.0/24) separate from the LAN (192.168.1.0/24). The host routes between them.\nSteps: Create a bridge for VMs: 1 2 3 sudo ip link add br0 type bridge sudo ip addr add 10.0.0.1/24 dev br0 sudo ip link set br0 up Enable IP forwarding: 1 2 3 4 echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward # To make it permanent echo \"net.ipv4.ip_forward=1\" | sudo tee -a /etc/sysctl.conf Add NAT to route external traffic: 1 sudo iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth0 -j MASQUERADE Attach VM interfaces (tapX, vethX) to br0. (Optional) Run a DHCP server (e.g., dnsmasq) on br0. Gives you subnet isolation, control, and routing. Useful for test environments, services segregation, or firewall zones.\nStep-by-Step: Create and Attach a TAP Interface for a VM 1. Create a TAP Device You must create it as the user that will run the VM, or as root.\n1 sudo ip tuntap add dev tap0 mode tap user $(whoami) tap0 is the virtual NIC. mode tap means Ethernet-like interface. user ensures your VM process (e.g., QEMU/KVM) can access the device. 2. Attach the TAP Device to the Bridge 1 2 sudo ip link set tap0 master br0 sudo ip link set tap0 up Now, tap0 is a bridge port just like a physical NIC. Anything connected to it is part of the bridge network (br0).\n3. Launch Your VM with TAP Networking If you’re using QEMU/KVM directly:\n1 2 3 4 5 qemu-system-x86_64 \\ -m 2048 \\ -hda vm.img \\ -netdev tap,id=net0,ifname=tap0,script=no,downscript=no \\ -device virtio-net-pci,netdev=net0 -netdev tap: Connects QEMU to tap0. script=no: Tells QEMU not to run legacy up/down scripts. virtio-net-pci: Fast virtual NIC (recommended). 4. Configure Networking Inside the VM Inside the guest OS (e.g., Ubuntu):\nUse DHCP (auto-configure if br0 has access to a DHCP server). Or assign a static IP on the appropriate subnet (10.0.0.x/24 if routed, or whatever your LAN is if bridged to eth0). Comparison Mode L2 Bridging L3 Routed Subnet Host uses br0 for LAN eth0 (LAN), br0 (VM subnet) VMs get IP From LAN DHCP From internal DHCP or static IP Forwarding Not needed Required NAT Needed No Optional (only if no static routes on LAN) Isolation None (same LAN) Full (separate network) Routing Bridged Host-level router ","wordCount":"489","inLanguage":"en","datePublished":"2025-04-23T09:10:00Z","dateModified":"2025-04-23T09:10:00Z","author":{"@type":"Person","name":"Gauthier Jolly"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://gjolly.fr/blog/virtual-networking/"},"publisher":{"@type":"Organization","name":"Gauthier Jolly","logo":{"@type":"ImageObject","url":"https://gjolly.fr/img/terminal-sign.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gjolly.fr/ accesskey=h title="Home (Alt + H)"><img src=https://gjolly.fr/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gjolly.fr/blog/ title=blog><span>blog</span></a></li><li><a href=https://gjolly.fr/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://gjolly.fr/>Home</a>&nbsp;»&nbsp;<a href=https://gjolly.fr/blog/>Blogs</a></div><h1 class="post-title entry-hint-parent">Practical Guide To Virtual Networking on Linux</h1><div class=post-description>How to create and manage virtual networks on you Linux host.</div><div class=post-meta><span title='2025-04-23 09:10:00 +0000 UTC'>April 23, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Gauthier Jolly</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#linux-networking-bridged-and-routed-vm-networking>Linux Networking: Bridged and Routed VM Networking</a><ul><li><a href=#scenario-1-bridged-networking-layer-2-integration>Scenario 1: Bridged Networking (Layer 2 Integration)</a></li><li><a href=#scenario-2-routed-subnet-for-vms-layer-3-isolation>Scenario 2: Routed Subnet for VMs (Layer 3 Isolation)</a></li></ul></li><li><a href=#step-by-step-create-and-attach-a-tap-interface-for-a-vm>Step-by-Step: Create and Attach a TAP Interface for a VM</a><ul><li><a href=#1-create-a-tap-device>1. Create a TAP Device</a></li><li><a href=#2-attach-the-tap-device-to-the-bridge>2. Attach the TAP Device to the Bridge</a></li><li><a href=#3-launch-your-vm-with-tap-networking>3. Launch Your VM with TAP Networking</a></li><li><a href=#4-configure-networking-inside-the-vm>4. Configure Networking Inside the VM</a></li></ul></li><li><a href=#comparison>Comparison</a></li></ul></nav></div></details></div><div class=post-content><h2 id=linux-networking-bridged-and-routed-vm-networking>Linux Networking: Bridged and Routed VM Networking<a hidden class=anchor aria-hidden=true href=#linux-networking-bridged-and-routed-vm-networking>#</a></h2><h3 id=scenario-1-bridged-networking-layer-2-integration>Scenario 1: Bridged Networking (Layer 2 Integration)<a hidden class=anchor aria-hidden=true href=#scenario-1-bridged-networking-layer-2-integration>#</a></h3><p><strong>Goal</strong>: VMs/containers appear as full LAN peers, get IPs from the LAN&rsquo;s DHCP, and are reachable directly.</p><ul><li>Create a bridge interface (<code>br0</code>).</li><li>Add the physical interface (e.g., <code>eth0</code>) to the bridge.</li><li>Assign IP or DHCP <strong>to <code>br0</code> only</strong>. <code>eth0</code> should have no IP.</li><li>Virtual interfaces (e.g., <code>tap0</code>) are also added to <code>br0</code>.</li></ul><h4 id=key-commands>Key Commands:<a hidden class=anchor aria-hidden=true href=#key-commands>#</a></h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ip link add br0 <span class=nb>type</span> bridge
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> eth0 master br0
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> br0 up
</span></span><span class=line><span class=cl>sudo dhcpcd br0
</span></span></code></pre></td></tr></table></div></div><blockquote><p>No NAT, no subnetting. Full LAN access.</p></blockquote><h3 id=scenario-2-routed-subnet-for-vms-layer-3-isolation>Scenario 2: Routed Subnet for VMs (Layer 3 Isolation)<a hidden class=anchor aria-hidden=true href=#scenario-2-routed-subnet-for-vms-layer-3-isolation>#</a></h3><p><strong>Goal</strong>: Create a dedicated VM network (<code>10.0.0.0/24</code>) separate from the LAN (<code>192.168.1.0/24</code>). The host routes between them.</p><h4 id=steps>Steps:<a hidden class=anchor aria-hidden=true href=#steps>#</a></h4><ol><li><strong>Create a bridge for VMs</strong>:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ip link add br0 <span class=nb>type</span> bridge
</span></span><span class=line><span class=cl>sudo ip addr add 10.0.0.1/24 dev br0
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> br0 up
</span></span></code></pre></td></tr></table></div></div><ol start=2><li><strong>Enable IP forwarding</strong>:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=m>1</span> <span class=p>|</span> sudo tee /proc/sys/net/ipv4/ip_forward
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># To make it permanent</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;net.ipv4.ip_forward=1&#34;</span> <span class=p>|</span> sudo tee -a /etc/sysctl.conf
</span></span></code></pre></td></tr></table></div></div><ol start=3><li><strong>Add NAT to route external traffic</strong>:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth0 -j MASQUERADE
</span></span></code></pre></td></tr></table></div></div><ol start=4><li><strong>Attach VM interfaces (<code>tapX</code>, <code>vethX</code>) to <code>br0</code></strong>.</li><li><strong>(Optional) Run a DHCP server (e.g., dnsmasq) on <code>br0</code></strong>.</li></ol><blockquote><p>Gives you subnet isolation, control, and routing. Useful for test environments, services segregation, or firewall zones.</p></blockquote><h2 id=step-by-step-create-and-attach-a-tap-interface-for-a-vm>Step-by-Step: Create and Attach a TAP Interface for a VM<a hidden class=anchor aria-hidden=true href=#step-by-step-create-and-attach-a-tap-interface-for-a-vm>#</a></h2><h3 id=1-create-a-tap-device>1. Create a TAP Device<a hidden class=anchor aria-hidden=true href=#1-create-a-tap-device>#</a></h3><p>You must create it as the user that will run the VM, or as root.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ip tuntap add dev tap0 mode tap user <span class=k>$(</span>whoami<span class=k>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>tap0</code> is the virtual NIC.</li><li><code>mode tap</code> means Ethernet-like interface.</li><li><code>user</code> ensures your VM process (e.g., QEMU/KVM) can access the device.</li></ul><h3 id=2-attach-the-tap-device-to-the-bridge>2. Attach the TAP Device to the Bridge<a hidden class=anchor aria-hidden=true href=#2-attach-the-tap-device-to-the-bridge>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ip link <span class=nb>set</span> tap0 master br0
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> tap0 up
</span></span></code></pre></td></tr></table></div></div><p>Now, <code>tap0</code> is a bridge port just like a physical NIC. Anything connected to it is part of the bridge network (<code>br0</code>).</p><h3 id=3-launch-your-vm-with-tap-networking>3. Launch Your VM with TAP Networking<a hidden class=anchor aria-hidden=true href=#3-launch-your-vm-with-tap-networking>#</a></h3><p>If you’re using <strong>QEMU/KVM</strong> directly:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>qemu-system-x86_64 <span class=se>\
</span></span></span><span class=line><span class=cl>  -m <span class=m>2048</span> <span class=se>\
</span></span></span><span class=line><span class=cl>  -hda vm.img <span class=se>\
</span></span></span><span class=line><span class=cl>  -netdev tap,id<span class=o>=</span>net0,ifname<span class=o>=</span>tap0,script<span class=o>=</span>no,downscript<span class=o>=</span>no <span class=se>\
</span></span></span><span class=line><span class=cl>  -device virtio-net-pci,netdev<span class=o>=</span>net0
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-netdev tap</code>: Connects QEMU to <code>tap0</code>.</li><li><code>script=no</code>: Tells QEMU not to run legacy up/down scripts.</li><li><code>virtio-net-pci</code>: Fast virtual NIC (recommended).</li></ul><h3 id=4-configure-networking-inside-the-vm>4. Configure Networking Inside the VM<a hidden class=anchor aria-hidden=true href=#4-configure-networking-inside-the-vm>#</a></h3><p>Inside the guest OS (e.g., Ubuntu):</p><ul><li>Use DHCP (auto-configure if <code>br0</code> has access to a DHCP server).</li><li>Or assign a static IP on the appropriate subnet (<code>10.0.0.x/24</code> if routed, or whatever your LAN is if bridged to <code>eth0</code>).</li></ul><h2 id=comparison>Comparison<a hidden class=anchor aria-hidden=true href=#comparison>#</a></h2><table><thead><tr><th>Mode</th><th>L2 Bridging</th><th>L3 Routed Subnet</th></tr></thead><tbody><tr><td>Host uses</td><td><code>br0</code> for LAN</td><td><code>eth0</code> (LAN), <code>br0</code> (VM subnet)</td></tr><tr><td>VMs get IP</td><td>From LAN DHCP</td><td>From internal DHCP or static</td></tr><tr><td>IP Forwarding</td><td>Not needed</td><td><strong>Required</strong></td></tr><tr><td>NAT Needed</td><td>No</td><td>Optional (only if no static routes on LAN)</td></tr><tr><td>Isolation</td><td>None (same LAN)</td><td>Full (separate network)</td></tr><tr><td>Routing</td><td>Bridged</td><td>Host-level router</td></tr></tbody></table></div><footer class=post-footer><ul class=post-tags><li><a href=https://gjolly.fr/tags/linux/>Linux</a></li><li><a href=https://gjolly.fr/tags/networking/>Networking</a></li></ul><nav class=paginav><a class=prev href=https://gjolly.fr/blog/linux-system-boot/><span class=title>« Prev</span><br><span>Architecture of a Linux system and boot process</span>
</a><a class=next href=https://gjolly.fr/blog/nivdia-drivers/><span class=title>Next »</span><br><span>How to install NVIDIA drivers on Ubuntu</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://gjolly.fr/>Gauthier Jolly</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>