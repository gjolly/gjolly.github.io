<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Build an AI inference server on Ubuntu | Gauthier Jolly</title><meta name=keywords content="Linux,Ubuntu,AI,LLM,Docker,NVIDIA"><meta name=description content="Deploy local LLM inference with ollama and open-webui"><meta name=author content="Gauthier Jolly"><link rel=canonical href=https://gjolly.fr/blog/llm-inference/><link crossorigin=anonymous href=https://gjolly.fr/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://gjolly.fr/img/terminal-sign.svg><link rel=icon type=image/png sizes=16x16 href=https://gjolly.fr/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gjolly.fr/favicon-32x32.png><link rel=apple-touch-icon href=https://gjolly.fr/apple-touch-icon.png><link rel=mask-icon href=https://gjolly.fr/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://gjolly.fr/blog/llm-inference/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y4G50Q2695"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y4G50Q2695")}</script><meta property="og:url" content="https://gjolly.fr/blog/llm-inference/"><meta property="og:site_name" content="Gauthier Jolly"><meta property="og:title" content="Build an AI inference server on Ubuntu"><meta property="og:description" content="Deploy local LLM inference with ollama and open-webui"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-12-13T19:10:00+00:00"><meta property="article:modified_time" content="2025-12-13T19:10:00+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Ubuntu"><meta property="article:tag" content="AI"><meta property="article:tag" content="LLM"><meta property="article:tag" content="Docker"><meta property="article:tag" content="NVIDIA"><meta name=twitter:card content="summary"><meta name=twitter:title content="Build an AI inference server on Ubuntu"><meta name=twitter:description content="Deploy local LLM inference with ollama and open-webui"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://gjolly.fr/blog/"},{"@type":"ListItem","position":2,"name":"Build an AI inference server on Ubuntu","item":"https://gjolly.fr/blog/llm-inference/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Build an AI inference server on Ubuntu","name":"Build an AI inference server on Ubuntu","description":"Deploy local LLM inference with ollama and open-webui","keywords":["Linux","Ubuntu","AI","LLM","Docker","NVIDIA"],"articleBody":"Open source tools like Ollama and Open WebUI are convenient for building local LLM inference stacks that let you create a ChatGPT-like experience on your own infrastructure. Whether you are a hobbyist, someone concerned about privacy, or a business looking to deploy LLMs on-premises, these tools can help you achieve that. To start, the only thing you need is a server or PC running Ubuntu and a GPU for faster inference results.\nMaking sure the system is up-to-date As long as you use the latest kernels provided by Ubuntu, you can enjoy the pre-built NVIDIA drivers that come with the OS.\nFirst make sure your server is up-to-date:\nsudo apt update sudo apt full-upgrade -y If your system needs reboot, reboot it before running:\nsudo apt autoremove You can check if your system needs to be rebooted by checking if this file exists: /var/run/reboot-required.\nInstalling the NVIDIA driver (skip this step if you have an AMD GPU) Drivers Install the NVIDIA drivers by following the instructions in this post: How to install NVIDIA drivers on Ubuntu.\nNVIDIA Container Toolkit You will also need the NVIDIA container toolkit which is not available in the Ubuntu archive. Thus, you need to install the NVIDIA repository first:\nsudo mkdir -p /etc/apt/keyrings curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | gpg --dearmor | sudo tee /etc/apt/keyrings/nvidia-container-toolkit-keyring.gpg \u003e /dev/null curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | sed 's#deb https://#deb [sig ned-by=/etc/apt/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list \u003e /dev/null Then, install the toolkit:\nsudo apt update sudo apt install -y nvidia-container-toolkit Note: You can find a detailed guide about this section on the NVIDIA documentation https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html\nVerify the installation You can verify that the installation was successful by running: nvidia-smi. If everything is working correctly, you should see the output of nvidia-smi showing your GPU information.\nInstall AMD drivers (NVIDIA users can skip this section) The amdgpu drivers are included in the Linux kernel and should work out of the box. Since we’re using Docker for the LLM inference server, the ROCm toolkit (like the CUDA toolkit for NVIDIA) will be included in the container image, so there’s nothing to install.\nInstall Docker Install Docker on your machine by following this documentation: https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository.\nOnce done, if you are using an NVIDIA container, run the following command to configure Docker:\nsudo nvidia-ctk runtime configure --runtime=docker sudo systemctl restart docker After running this command, you should find something like this in /etc/docker/daemon.json:\n{ \"runtimes\": { \"nvidia\": { \"args\": [], \"path\": \"nvidia-container-runtime\" } } } Installing ollama and open-webui ollama is the server that will be running the LLMs and open-webui is the chatgpt-like UI to chat with the model.\nCreate a docker-compose.yml file with the following content:\nservices: ollama: # use ollama/ollama:rocm for AMD GPU image: ollama/ollama volumes: - ollama:/root/.ollama container_name: ollama pull_policy: always tty: true restart: unless-stopped gpus: all open-webui: image: ghcr.io/open-webui/open-webui:main container_name: open-webui volumes: - openwebui:/app/backend/data depends_on: - ollama ports: - 127.0.0.1:8080:8080 environment: OLLAMA_BASE_URL: http://ollama:11434 WEBUI_URL: http://localhost:8080 restart: unless-stopped volumes: ollama: openwebui: Note: For AMD GPU users, replace gpus: all with\ndevices: - /dev/kfd - /dev/dri and the ollama image by ollama/ollama:rocm.\nSimply run docker-compose up -d, and you should be able to open http://localhost:8080 in your favorite web browser and start chatting with your model!\nBut wait, you don’t have any model yet!\nDownloading a model You can download models directly from the ollama container. For example, to download the llama2 model, run:\ndocker exec -it ollama ollama pull llama2 This will download the model inside the ollama container and make it available for inference.\nYou can also list available models by running:\ndocker exec -it ollama ollama list or check the Ollama model repository for more models. Make sure the size of the model fits in your GPU memory! For example, llama2 requires at least 4GB of GPU memory. You can check your GPU memory by running nvidia-smi or btop.\nMaintenance To update the ollama and open-webui images, simply run:\ndocker-compose pull docker-compose up -d To keep the NVIDIA drivers up-to-date and never pull the DKMS packages, follow the instructions in this post: How to install NVIDIA drivers on Ubuntu.\nReferences Ollama documentation Open-webui documentation NVIDIA Container Toolkit installation guide Ubuntu Kernel cycles ","wordCount":"693","inLanguage":"en","datePublished":"2025-12-13T19:10:00Z","dateModified":"2025-12-13T19:10:00Z","author":{"@type":"Person","name":"Gauthier Jolly"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://gjolly.fr/blog/llm-inference/"},"publisher":{"@type":"Organization","name":"Gauthier Jolly","logo":{"@type":"ImageObject","url":"https://gjolly.fr/img/terminal-sign.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gjolly.fr/ accesskey=h title="Home (Alt + H)"><img src=https://gjolly.fr/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gjolly.fr/blog/ title=blog><span>blog</span></a></li><li><a href=https://gjolly.fr/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://gjolly.fr/>Home</a>&nbsp;»&nbsp;<a href=https://gjolly.fr/blog/>Blogs</a></div><h1 class="post-title entry-hint-parent">Build an AI inference server on Ubuntu</h1><div class=post-description>Deploy local LLM inference with ollama and open-webui</div><div class=post-meta><span title='2025-12-13 19:10:00 +0000 UTC'>December 13, 2025</span>&nbsp;·&nbsp;693 words&nbsp;·&nbsp;Gauthier Jolly</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#making-sure-the-system-is-up-to-date>Making sure the system is up-to-date</a></li><li><a href=#installing-the-nvidia-driver-skip-this-step-if-you-have-an-amd-gpu>Installing the NVIDIA driver (skip this step if you have an AMD GPU)</a><ul><li><a href=#drivers>Drivers</a></li><li><a href=#nvidia-container-toolkit>NVIDIA Container Toolkit</a></li><li><a href=#verify-the-installation>Verify the installation</a></li></ul></li><li><a href=#install-amd-drivers-nvidia-users-can-skip-this-section>Install AMD drivers (NVIDIA users can skip this section)</a></li><li><a href=#install-docker>Install Docker</a></li><li><a href=#installing-ollama-and-open-webui>Installing <code>ollama</code> and <code>open-webui</code></a></li><li><a href=#downloading-a-model>Downloading a model</a></li><li><a href=#maintenance>Maintenance</a></li></ul></nav></div></details></div><div class=post-content><p>Open source tools like <a href=https://ollama.com/>Ollama</a> and <a href=https://docs.openwebui.com/>Open WebUI</a> are convenient for building local LLM inference stacks that let you create a ChatGPT-like experience on your own infrastructure. Whether you are a hobbyist, someone concerned about privacy, or a business looking to deploy LLMs on-premises, these tools can help you achieve that. To start, the only thing you need is a server or PC running Ubuntu and a GPU for faster inference results.</p><h2 id=making-sure-the-system-is-up-to-date>Making sure the system is up-to-date<a hidden class=anchor aria-hidden=true href=#making-sure-the-system-is-up-to-date>#</a></h2><p>As long as you use the latest kernels provided by Ubuntu, you can enjoy the pre-built NVIDIA drivers that come with the OS.</p><p>First make sure your server is up-to-date:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt full-upgrade -y
</span></span></code></pre></div><p>If your system needs reboot, reboot it before running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt autoremove
</span></span></code></pre></div><p>You can check if your system needs to be rebooted by checking if this file exists: <code>/var/run/reboot-required</code>.</p><h2 id=installing-the-nvidia-driver-skip-this-step-if-you-have-an-amd-gpu>Installing the NVIDIA driver (skip this step if you have an AMD GPU)<a hidden class=anchor aria-hidden=true href=#installing-the-nvidia-driver-skip-this-step-if-you-have-an-amd-gpu>#</a></h2><h3 id=drivers>Drivers<a hidden class=anchor aria-hidden=true href=#drivers>#</a></h3><p>Install the NVIDIA drivers by following the instructions in this post: <a href=https://gjolly.fr/blog/nivdia-drivers/>How to install NVIDIA drivers on Ubuntu</a>.</p><h3 id=nvidia-container-toolkit>NVIDIA Container Toolkit<a hidden class=anchor aria-hidden=true href=#nvidia-container-toolkit>#</a></h3><p>You will also need the NVIDIA container toolkit which is not available in the Ubuntu archive. Thus, you need to install the NVIDIA repository first:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mkdir -p /etc/apt/keyrings
</span></span><span class=line><span class=cl>curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey <span class=p>|</span> gpg --dearmor <span class=p>|</span> sudo tee /etc/apt/keyrings/nvidia-container-toolkit-keyring.gpg &gt; /dev/null
</span></span><span class=line><span class=cl>curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list <span class=p>|</span> sed <span class=s1>&#39;s#deb https://#deb [sig
</span></span></span><span class=line><span class=cl><span class=s1>ned-by=/etc/apt/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g&#39;</span> <span class=p>|</span> sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list &gt; /dev/null
</span></span></code></pre></div><p>Then, install the toolkit:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install -y nvidia-container-toolkit
</span></span></code></pre></div><blockquote><p>Note: You can find a detailed guide about this section on the NVIDIA documentation
<a href=https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html>https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html</a></p></blockquote><h3 id=verify-the-installation>Verify the installation<a hidden class=anchor aria-hidden=true href=#verify-the-installation>#</a></h3><p>You can verify that the installation was successful by running: <code>nvidia-smi</code>.
If everything is working correctly, you should see the output of <code>nvidia-smi</code> showing your GPU information.</p><h2 id=install-amd-drivers-nvidia-users-can-skip-this-section>Install AMD drivers (NVIDIA users can skip this section)<a hidden class=anchor aria-hidden=true href=#install-amd-drivers-nvidia-users-can-skip-this-section>#</a></h2><p>The <code>amdgpu</code> drivers are included in the Linux kernel and should work out of the box. Since we&rsquo;re using Docker for the LLM inference server, the ROCm toolkit (like the CUDA toolkit for NVIDIA) will be included in the container image, so there&rsquo;s nothing to install.</p><h2 id=install-docker>Install Docker<a hidden class=anchor aria-hidden=true href=#install-docker>#</a></h2><p>Install Docker on your machine by following this documentation: <a href=https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository>https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository</a>.</p><p>Once done, if you are using an NVIDIA container, run the following command to configure Docker:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo nvidia-ctk runtime configure --runtime<span class=o>=</span>docker
</span></span><span class=line><span class=cl>sudo systemctl restart docker
</span></span></code></pre></div><p>After running this command, you should find something like this in <code>/etc/docker/daemon.json</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;runtimes&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;nvidia&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;args&#34;</span>: <span class=o>[]</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;path&#34;</span>: <span class=s2>&#34;nvidia-container-runtime&#34;</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=installing-ollama-and-open-webui>Installing <code>ollama</code> and <code>open-webui</code><a hidden class=anchor aria-hidden=true href=#installing-ollama-and-open-webui>#</a></h2><p><code>ollama</code> is the server that will be running the LLMs and <code>open-webui</code> is the chatgpt-like UI to chat with the model.</p><p>Create a <code>docker-compose.yml</code> file with the following content:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ollama</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># use ollama/ollama:rocm for AMD GPU</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ollama/ollama</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ollama:/root/.ollama</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>ollama</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pull_policy</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tty</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>gpus</span><span class=p>:</span><span class=w> </span><span class=l>all</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>open-webui</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ghcr.io/open-webui/open-webui:main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>open-webui</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>openwebui:/app/backend/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>ollama</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>127.0.0.1</span><span class=p>:</span><span class=m>8080</span><span class=p>:</span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>OLLAMA_BASE_URL</span><span class=p>:</span><span class=w> </span><span class=l>http://ollama:11434</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>WEBUI_URL</span><span class=p>:</span><span class=w> </span><span class=l>http://localhost:8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ollama</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>openwebui</span><span class=p>:</span><span class=w>
</span></span></span></code></pre></div><blockquote><p><strong>Note</strong>: For AMD GPU users, replace <code>gpus: all</code> with</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>devices</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>/dev/kfd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>/dev/dri</span><span class=w>
</span></span></span></code></pre></div><p>and the <code>ollama</code> image by <code>ollama/ollama:rocm</code>.</p></blockquote><p>Simply run <code>docker-compose up -d</code>, and you should be able to open <a href=http://localhost:8080>http://localhost:8080</a> in your favorite web browser and start chatting with your model!</p><p>But wait, you don&rsquo;t have any model yet!</p><h2 id=downloading-a-model>Downloading a model<a hidden class=anchor aria-hidden=true href=#downloading-a-model>#</a></h2><p>You can download models directly from the <code>ollama</code> container. For example, to download the <code>llama2</code> model, run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker <span class=nb>exec</span> -it ollama ollama pull llama2
</span></span></code></pre></div><p>This will download the model inside the <code>ollama</code> container and make it available for inference.</p><p>You can also list available models by running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker <span class=nb>exec</span> -it ollama ollama list
</span></span></code></pre></div><p>or check the <a href=https://ollama.com/models>Ollama model repository</a> for more models. <em>Make sure the size of the model fits in your GPU memory!</em> For example, <code>llama2</code> requires at least 4GB of GPU memory. You can check your GPU memory by running <code>nvidia-smi</code> or <code>btop</code>.</p><h2 id=maintenance>Maintenance<a hidden class=anchor aria-hidden=true href=#maintenance>#</a></h2><p>To update the <code>ollama</code> and <code>open-webui</code> images, simply run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker-compose pull
</span></span><span class=line><span class=cl>docker-compose up -d
</span></span></code></pre></div><p>To keep the NVIDIA drivers up-to-date and never pull the DKMS packages, follow the instructions in this post: <a href=https://gjolly.fr/blog/nivdia-drivers/>How to install NVIDIA drivers on Ubuntu</a>.</p><h1 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h1><ul><li><a href=https://docs.ollama.com/docker>Ollama documentation</a></li><li><a href=https://docs.openwebui.com/>Open-webui documentation</a></li><li><a href=https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html>NVIDIA Container Toolkit installation guide</a></li><li><a href="https://ubuntu.com/about/release-cycle?product=ubuntu-kernel&amp;release=ubuntu+kernel&amp;version=all">Ubuntu Kernel cycles</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://gjolly.fr/tags/linux/>Linux</a></li><li><a href=https://gjolly.fr/tags/ubuntu/>Ubuntu</a></li><li><a href=https://gjolly.fr/tags/ai/>AI</a></li><li><a href=https://gjolly.fr/tags/llm/>LLM</a></li><li><a href=https://gjolly.fr/tags/docker/>Docker</a></li><li><a href=https://gjolly.fr/tags/nvidia/>NVIDIA</a></li></ul><nav class=paginav><a class=next href=https://gjolly.fr/blog/ubuntu-desktop-images/><span class=title>Next »</span><br><span>Build an Ubuntu Destkop image with genesis</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://gjolly.fr/>Gauthier Jolly</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>